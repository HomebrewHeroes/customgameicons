<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Game Icons</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .game-icon {
            max-width: 150px;
            max-height: 150px;
        }

        #search-bar {
            margin: 20px;
            padding: 10px;
        }

        #game-icons-container {
            margin: 20px;
        }

        .title-group {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Custom Game Icons</h1>

    <!-- Search bar -->
    <input type="text" id="search-bar" placeholder="Search for game icons">

    <!-- All Icons Section -->
    <h2>All Icons</h2>
    <div id="game-icons-container"></div>

    <script>
        let iconsData; // Variable to store the JSON data

        // Function to display icons based on the JSON data
        function displayIcons(data, searchQuery) {
            const iconsContainer = document.getElementById('game-icons-container');
            iconsContainer.innerHTML = '';

            data.games.forEach(game => {
                const gameName = game.name;

                // Filter games based on search query
                if (gameName.toLowerCase().includes(searchQuery.toLowerCase())) {
                    const gameGroupContainer = document.createElement('div');
                    gameGroupContainer.classList.add('title-group');

                    gameGroupContainer.innerHTML = `<h3>${gameName}</h3>`;

                    game.subcategories.forEach(subcategory => {
                        const subcategoryName = subcategory.name;

                        const subcategoryContainer = document.createElement('div');

                        // Filter subcategories based on search query
                        if (subcategoryName.toLowerCase().includes(searchQuery.toLowerCase())) {
                            subcategoryContainer.innerHTML = `<h4>${subcategoryName}</h4>`;

                            subcategory.icons.forEach(icon => {
                                const iconElement = document.createElement('div');
                                iconElement.innerHTML = `
                                    <h5>${icon.name}</h5>
                                    <img class='game-icon' src='${icon.url}' alt='${icon.name}'>
                                `;
                                subcategoryContainer.appendChild(iconElement);
                            });

                            gameGroupContainer.appendChild(subcategoryContainer);
                        }
                    });

                    iconsContainer.appendChild(gameGroupContainer);
                }
            });
        }

        const searchBar = document.getElementById('search-bar');
        searchBar.addEventListener('input', function () {
            displayIcons(iconsData, this.value);
        });

        // Initial fetch to display all icons
        fetch('https://raw.githubusercontent.com/HomebrewHeroes/customgameicons/main/icons.json')
            .then(response => response.json())
            .then(data => {
                // Store the data globally for later use
                iconsData = data;
                // Display icons initially
                displayIcons(iconsData, '');
            })
            .catch(error => console.error('Error fetching JSON:', error));
    </script>
</body>
</html>
